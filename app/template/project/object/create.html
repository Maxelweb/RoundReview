{% extends 'project/base.html' %}

{% block inner_content %}
    <a href="{{ url_for('project.view_objects', project_id=project_id) }}" class="small go-back-link"><i class="fas fa-circle-arrow-left"></i> Back to project</a>
    
    <p>Fill the form below to create a new document.</p>

    <form action="{{ url_for('project.create_object', project_id=project_id) }}" method="post" enctype="multipart/form-data">
        <table>
            <tr>
                <th><label for="objectPdf">Location</label></th>
                <td width="75%">
                    <div id="locationInput" class="location-input" tabindex="0" style="display: flex; align-items: center; flex-wrap: wrap; padding: 4px; min-height: 26px;">
                        <code>/</code> &nbsp;
                        <input type="hidden" name="path" id="locationHidden"
                        {% if data %} value="{{ data.path }}" {% else %} value="{{ folder_path }}" {% endif %}>
                        <span id="locationSegments" style="display: flex; align-items: center; flex-wrap: wrap;">
                            <span style="margin: 0px 2px;">/</span>
                        </span>
                        <input type="text" id="locationText" style="border: none; outline: none; min-width: 40px; flex: 1;">
                    </div>
                    <p class="small block muted">Use <code>/</code> to add new folders (max 3 folders).</p>
                </td>
            </tr>
            <tr>
                <th><label for="objectPdf">PDF File</label></th>
                <td>
                    <input type="file" id="objectPdf" name="file" accept="application/pdf" required class="my-1">
                    <p class="small block muted">Only <code>.pdf</code> extension is accepted.</p>
                </td>
            </tr>
            <tr>
                <th><label for="objectName">Document name</label></th>
                <td>
                    <input type="text" id="objectName" name="name" placeholder="Enter object name" required class="my-1" {% if data %} value="{{ data.name }}" {% endif %}>
                </td>
            </tr>
            <tr>
                <th><label for="objectDescription">Description / Notes</label></th>
                <td>
                    <textarea id="objectDescription" name="description" placeholder="Enter description" maxlength="256" class="my-1">{% if data %}{{ data.description }}{% endif %}</textarea>
                    <p class="small block muted">This field is <span class="strong">optional</span>.</p>
                </td>
            </tr>
            <tr>
                <th><label for="objectVersion">Version</label></th>
                <td>
                    <input type="text" id="objectVersion" name="version" placeholder="e.g. 1.0.0" pattern="^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-[\da-z\-]+(?:\.[\da-z\-]+)*)?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?$" required class="my-1" title="Version must follow semantic versioning (e.g. 1.0.0)" {% if data %} value="{{ data.version }}" {% endif %}>
                </td>
            </tr>
        </table>
        <div class="my-2">
            <input type="submit" value="Confirm">
        </div>
    </form>

    <script src="{{ url_for('static', filename='js/create_update_object.js') }}" type="module"></script>

{% endblock %}